<div class="container containerInterno">

  <div class="grid">
    <div class="col-12">
      <h1 class="barTitle">{{ editandoLancamento ? "Edição de " : "Novo "}} Lançamento</h1>
    </div>
  </div>

  <form #lancamentoForm="ngForm" class="formDados" (ngSubmit)="salvaLancamento(lancamentoForm)">
    <div class="grid">
      <div class="col-12 md:col-3 p-fluid">
        <p-selectButton [options]="tipos" #tipo="ngModel" name="tipo" [(ngModel)]="lancamentoModel.tipo"  ></p-selectButton>
      </div>
    </div>
    <div class="grid">
      <div class="col-12 md:col-6 p-fluid">
        <label>Conta</label>
        <p-dropdown class="dropDown" [options]="contas" name="conta" [(ngModel)]="lancamentoModel.conta.id" #conta="ngModel" tooltip="Conta do lançamento" tooltipPosition="top"></p-dropdown>
      </div>
      <div class="col-12 md:col-6 p-fluid">
        <label>Tipo</label>
        <p-dropdown class="dropDown" [options]="movimentos" name="movimento" [(ngModel)]="lancamentoModel.movimento" #movimento="ngModel" tooltip="Conta do lançamento" tooltipPosition="top"></p-dropdown>
      </div>
      <div class="col-12 p-fluid">
        <label >Descrição</label>
        <input type="text" pInputText name="descricao" [(ngModel)]="lancamentoModel.descricao" #descricao="ngModel" required minlength="5" pTooltip="Descrição do lançamento"
           tooltipPosition="top" placeholder="Digite uma descrição para o lançamento">
        <app-message [control]="descricao.control" error="required" text="Informe uma descrição para o lançamento"></app-message>
        <app-message [control]="descricao.control" error="minlength" text="Descrição deve ter no mínimo 5 caracters"></app-message>
      </div>
      <div class="col-12 md:col-4 p-fluid">
        <label >Data Pagamento</label>
        <!-- dateFormat="dd/mm/yy" -->
        <p-calendar dateFormat="yy-mm-dd" [inputStyle]="{ width: '100px' }" name="dataPagamento" [(ngModel)]="lancamentoModel.dataPagamento" #dataPagamento="ngModel"></p-calendar>
      </div>
      <div class="col-12 md:col-4 p-fluid">
        <label >Valor</label>
        <p-inputNumber mode="currency" currency="BRL" locale="pt-BR" placeholder="0,00" allowNegative=false
          name="valor" [(ngModel)]="lancamentoModel.valor" #valor="ngModel"></p-inputNumber>
      </div>
      <div class="col-12 md:col-4 p-fluid">
        <label class="inputSwitch">Status</label>
        <p-dropdown [options]="status" name="statusPagamento" [(ngModel)]="lancamentoModel.statusPagamento" #statusPagamento="ngModel"></p-dropdown>
      </div>
      <div class="col-12 md:col-6 p-fluid">
        <label >Categoria</label>
        <p-dropdown [options]="categorias" [filter]="true" placeholder="Selecione..." name="categoria"
          [(ngModel)]="lancamentoModel.idCategoria.id" #categoria="ngModel"></p-dropdown>
      </div>
      <div class="col-12 md:col-6 p-fluid">
        <label >Qtd Repetição</label>
        <input type="number" pInputText name="qtdRepeticao" [(ngModel)]="lancamentoModel.qtdRepeticao" #qtdRepeticao="ngModel" />
      </div>
      <div class="col-12 p-fluid">
        <label >Observação</label>
        <textarea pInputTextarea [rows]="3" name="observacao" [(ngModel)]="lancamentoModel.observacao" #observacao="ngModel"></textarea>
      </div>
      <div class="col-12">
        <div class="col-12">
          <button pButton class="btn" type="submit" label="Salvar" [disabled]="!lancamentoForm.valid"></button>
          <button pButton class="btn" type="button" (click)="novoLancamento(lancamentoForm)" [disabled]="!lancamentoForm.dirty" label="Novo"></button>
          <a pButton routerLink="/lancamentos">Cancela/Volta para Pesquisa</a>
        </div>
      </div>
    </div>
  </form>
</div>
